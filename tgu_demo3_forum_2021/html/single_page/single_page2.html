<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />
		<style type="text/css">
			body {
				background-color: #fcfcfc;
			}

			#container {
				width: 65%;
				margin: 50px auto;
				padding: 50px 40px;
				box-shadow: 0 2px 6px rgb(100 100 100 / 30%);
				color: #444;
				background-color: white;
			}

			h1,
			h2,
			p {
				margin: 0;
			}

			.gray {
				color: #757575;
			}

			p {
				font-weight: normal;
			}

			img {
				width: 100%;
			}
		</style>
	</head>
	<body>
		<div id="container" class="container">
			<h1>用原生js和jquery制作小组间替换框架</h1>
			<p></p>
			<hr>
			<p>加载的部分有js css 和html</p>
			<p>加载js</p>
			<pre>
				_loadScript(url) {
					var load_position = $("#loadJs").get(0);
					var script = document.createElement("script");
					script.type = "text/javascript";
					script.src = url;
					load_position.appendChild(script);
				}
			</pre>
			<p>加载css</p>
			<pre>
				_loadCss(url) {
					var load_position = $("#loadCss").get(0);
					var link = document.createElement('link');
					link.type = 'text/css';
					link.rel = 'stylesheet';
					link.href = url;
					load_position.appendChild(link);
				}
			</pre>
			<p>加载html(需要服务器)</p>
			<pre>
				load(fun) {
					$(this.node).removeClass("replace"); //移除类
					var load_name = $(this.node).attr("load_name");
					var _node = this.node;
					var path = include_path + load_name + "/";
					$.get(path + "main.html", function(data) {
						_node.innerHTML = data;
						fun();
					})
					var check ;
					if($("#_check").get(0)==undefined){
						$("body").append($('&lt;div id="loadCss" style="display: none;"&gt;&lt;/div&gt;\
									&lt;div id="loadJs" style="display: none;"&gt;&lt;/div&gt;\
									&lt;div id="_check" style="display: none;"&gt;&lt;/div&gt;'));
					}
					var check=$("#_check").get(0);
					if (check.getElementsByTagName(load_name).length == 0) {
						var __node = document.createElement(load_name);
						console.log(__node);
						check.appendChild(__node);
						this._loadCss(path + "main.css");
						this._loadScript(path + "main.js");
					}
				}
			</pre>
			<p>为防止不同路径下出错，所以先取得顶级路径</p>
			<pre>
				var include_path = "elements/";
				function top_level_path() {
					var str = window.location.href;
					var main_path_name = "Forum-1";
					var index = str.indexOf(main_path_name);
					index += main_path_name.length;
					return str.substring(0, index);
				}
				(function set_include_path() {
					include_path = top_level_path() + "/" + include_path;
					console.log(include_path);
				})()
			</pre>
			<p>加载所有</p>
			<pre>
				function load_all(fun) {
					var arr = document.getElementsByClassName("replace");
					for (var i = 0; arr.length;) {
						new replace(arr[i]).load(fun);
					}
				}
			</pre>
		</div>
	</body>
</html>
