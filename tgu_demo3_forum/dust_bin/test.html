<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="loadCss" style="display: none;"></div>
    <div id="loadJs" style="display: none;"></div>
    <div id="_check" style="display: none;"></div>
    <script type="text/javascript">
        function load() {
            var arr = document.getElementsByClassName("replace");
            for (var i = 0; i < arr.length; i++) {
                new replace(arr[i]).load();
            }
        }
        class replace {
            include_path = "./elements/"
            constructor(_node) {
                this.node = _node;
            }
            _loadCss(url) {
                var load_position = $("#loadCss").get(0);
                var link = document.createElement('link');
                link.type = 'text/css';
                link.rel = 'stylesheet';
                link.href = url;
                load_position.appendChild(link);
            }
            _loadScript(url) {
                var load_position = $("#loadJs").get(0);
                var script = document.createElement("script");
                script.type = "text/javascript";
                script.src = url;
                load_position.appendChild(script);
            }
            load() {
                var load_name = $(this.node).attr("load_name");
                var _node = this.node;
                var path = this.include_path + load_name + "/";
                $.get(path + "main.html", function(data) {
                    _node.innerHTML = data;
                })
                var check = $("#_check").get(0);
                debugger;
                if (check.getElementsByTagName(load_name).length == 0) {
                    var __node = document.createElement(load_name);
                    console.log(__node);
                    check.appendChild(__node);
                    this._loadCss(path + "main.css");
                    this._loadScript(path + "main.js");
                }
            }
        }
        load();
        </script>
</body>
</html>